version: 0.2

# env:
#   variables:
#     JAVA_HOME: "/usr/lib/jvm/java-8-openjdk-amd64"
#   parameter-store:
#     LOGIN_PASSWORD: /CodeBuild/dockerLoginPassword

phases:
   install:
      runtime-versions:
         java: corretto17
   pre_build:
      commands:
         - echo Entered the pre_build phase...
         - mvn install
   build:
      commands:
         - echo Entered the build phase...
         - echo Build started on `date`
         - mvn clean package
      finally:
         - echo This always runs even if the install command fails
   post_build:
      commands:
         - echo Entered the post_build phase...
         - echo Build completed on `date`

artifacts:
   files:
      - target/javaaws-0.0.1.jar
   # discard-paths: yes
   # secondary-artifacts:
   #   artifact1:
   #     files:
   #       - target/artifact-1.0.jar
   #     discard-paths: yes
   #   artifact2:
   #     files:
   #       - target/artifact-2.0.jar
   #     discard-paths: yes
cache:
   paths:
      - '/root/.m2/**/*'
